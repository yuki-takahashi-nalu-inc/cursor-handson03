# 第3章: Cmd+Kで細部を洗練させる

## 学習目標
- Cmd+K（インライン編集）でAIと協働してコードを改善
- Tab補完でAIにコードを生成してもらう
- AIとの細かい調整とリファクタリングを体験
- AIペアプログラミングでコード品質を向上させる方法を学ぶ

## 3.1 Cmd+KとTab補完の基本

### インライン編集の特徴
- **Cmd+K（Ctrl+K）**: 選択した範囲を直接AI編集
- **Tab補完**: コメントや関数名から自動補完
- **メリット**: ピンポイントな修正、素早い改善

### 使い分けのコツ
| ツール | 用途 | 適した場面 |
|--------|------|------------|
| **Agent（Cmd+I）** | 複雑な実装全般 | 新機能追加、複数ファイル編集 |
| **Cmd+K** | 局所的な改善 | リファクタリング、バグ修正 |
| **Tab補完** | 新規コード生成 | 関数作成、定型処理 |

## 3.2 Cmd+Kで細かい改善を体験

現在の実装で、気になるところが数多くあると思います。  
各自で気になるところをCmd+Kで改善してみましょう。

例: タイトルを調整

```
<h1 className="text-3xl font-bold text-gray-800">Kanban Board</h1
```

このようなタイトル部分を選択して、

**Agent（Cmd+I）を開いて、以下を入力：**

```
グラフィカルにしてください
```

💡 **その他にも気になる箇所はどんどん微調整をしてください**

## 3.3 Tab補完でコードを生成

コメントや関数の一部を書くと、続きをTab補完で生成してくれます。

例: タイトルをクリックでalertを表示

** タイトルタグの真上に以下を入力 **

```
{/* クリックするとHelloと表示される */}
```

ここでTabキーを押すと、以下のコードがタイトルタグ内に生成されるはずです

```typescript
onClick={() => alert('Hello')}
```

これでタイトルをクリックするとHelloと表示されるようになりました。

💡 **このようにAgentやインライン編集を使うまでもなく、直接コードを触りたい場合は、Tab補完も活用してください**


## 📝 この章でAIと協働して実現したこと

- ✅ Cmd+KでAIにピンポイントな改善を依頼
- ✅ Tab補完でAIにコードを生成してもらう

## 💡 Cmd+K活用のベストプラクティス

### 効果的な使い方

1. **具体的な指示**
```
❌ 「改善して」
✅ 「React.memoで最適化し、不要な再レンダリングを防ぐ」
```

2. **段階的な改善**
```
1. まず動作する実装
2. Cmd+Kで最適化
3. Cmd+Kでエラー処理追加
4. Cmd+Kでアクセシビリティ改善
```

3. **適切な範囲選択**
```
- 関数単位で選択
- 意味のあるブロック単位
- 依存関係を考慮
```

### Tab補完のコツ

1. **明確な日本語コメント**
```typescript
// タスクのステータスによってアイコンを返す関数
// todo: 時計アイコン、doing: 実行中アイコン、done: チェックマーク
```

2. **JSDocコメントから関数を生成**
```typescript
/**
 * タスクの期限までの残り日数を計算
 * @param dueDate - 期限日
 * @returns 残り日数（過ぎている場合は負の値）
 */
function getDaysUntilDue
// ここでTabキーを押す
```

3. **型定義からの補完**
```typescript
interface TaskFilter {
  status?: string
  priority?: string
  assignee?: string
}

// フィルター条件に基づいてタスクを絞り込む
function filterTasks(tasks: Task[], filter: TaskFilter): Task[] {
  // ここでTabキーを押す
}
```


## 🚀 次の章へ

第4章では、AIコードレビュー機能でAIにコード品質をチェックしてもらいます。
